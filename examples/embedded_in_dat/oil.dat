prepare {
  // Update this to point to your jdbc driver.
  // For instance mssql-jdbc-7.2.2.jre8.jar for mssql
  IloOplImportJava("../../external_libs/mssql-jdbc-7.2.2.jre8.jar")

  // The jar containing the jdbc custom data source
  IloOplImportJava("../../lib/jdbc-custom-data-source.jar");
  
  var connUrl = "jdbc:sqlserver://localhost;instanceName=SQLEXPRESS;databaseName=custom_data_source;integratedSecurity=true"
  
  // The default connection string uses mssql in integratedSecurity mode, so you can leave those as empty.
  // Otherwise, you must set your user password here
  var userName = "";
  var password = "";
  
  // Now create JdbcConfiguration
  var config = IloOplCallJava("com.ibm.opl.customdatasource.JdbcConfiguration", "<init>", "");
  config.setUrl(connUrl);

  config.addReadQuery("Gasolines", "SELECT NAME FROM GASDATA");
  config.addReadQuery("Oils", "SELECT NAME FROM OILDATA");
  config.addReadQuery("GasData", "SELECT * FROM GASDATA");
  config.addReadQuery("OilData", "SELECT * FROM OILDATA");
  
  // Maps result table "Results" to database table "result"
  config.addWriteMapping("Result", "result");
  

  // add custom data source
  IloOplCallJava("com.ibm.opl.customdatasource.JdbcCustomDataSource",
                 "addDataSource", "", config, thisOplModel);
}

MaxProduction = 14000;
ProdCost = 4;
